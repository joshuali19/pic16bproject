{% extends 'base.html' %}

{% block title %}
PIC16B Final Project
{% endblock %}

{% block header %}
<h1> Song Recommender </h1>
{% endblock %}

{% block content %}
<form method="post" enctype="multipart/form-data">
    <div class="text-center">
        <input type="file" value="Submit Playlist" accept=".json" id = "playlist" name = "playlist">
        <label for="playlist" class="custom-file-upload">
    Attach Your Playlist Here!
</label>
    </div>
    <br>
    <!-- <input type="file" name = "playlist" accept=".json"/> -->
    <br>
    <div class="text-center">
    <p>OR</p>
    <br>
    <p>Enter a Spotify playlist ID:</p>
    <p>(<a href="/tutorial/">Tutorial to find playlist ID</a>)</p>
    <input type="text" name="playlist_id">
    </div>
    <br><br>
    <br>
    <div class = "text-center">
    <button>Submit</button>
  </div>
  </form>
<br>
<br>
    {% if recs %}
        <p class="message">Thank you for submitting a playlist! Here are the recommendations that we think you might enjoy!
<br><br>
<h2> Feature Similarity </h2>
        {% for rec in recs[0:9] %}
<p>&#9;- <a href={{rec[2]}} target="_blank">{{rec[0]}} - {{rec[1]}} </a></p>
{% endfor %}
<h2> Item Similarity </h2>
        {% for rec in recs[10:19] %}
<p>&#9;- <a href={{rec[2]}} target="_blank">{{rec[0]}} - {{rec[1]}} </a></p>
{% endfor %}
<h2> Session Similarity </h2>
        {% for rec in recs[20:29] %}
<p>&#9;- <a href={{rec[2]}} target="_blank">{{rec[0]}} - {{rec[1]}} </a></p>
{% endfor %}
<h2> TF-IDF Similarity </h2>
        {% for rec in recs[30:39] %}
<p>&#9;- <a href={{rec[2]}} target="_blank">{{rec[0]}} - {{rec[1]}} </a></p>
{% endfor %}
    {% endif %}

    {% if error %}
        There has been an error. Please try to submit again. Make sure it is a .json file.
    {% endif %}
{% endblock %}